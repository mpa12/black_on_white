import{_ as y,E as w,f as _,U as P,r as x,G as I,o as c,c as r,a as t,e as d,t as o,b as m,w as g,F as b,g as A,l as D,p as k,d as z}from"./app-bded94c7.js";import{c as C}from"./ChangeDate-db5be761.js";import"./_commonjsHelpers-87174ba5.js";const S={name:"AdminParticipants",directives:{tippy:w},data(){return{participants:[],deleteParticipantInfo:[]}},mounted(){this.loadParticipants()},methods:{changeDate:C,loadParticipants(){_.get("/api/participant").then(e=>{this.participants=e.data.data})},getImgTag(e,s){return`<img width=150 style="border-radius: 10px" src="${e}" alt="${s}">`},loadDeleteParticipant(e){_.get("/api/participant/"+e).then(s=>{this.deleteParticipantInfo=s.data.data})},deleteParticipant(e){const s="/api/participant/"+e,h={_method:"delete"},p={headers:{Authorization:P.getAuthorizationString()}};_.post(s,h,p).then(this.loadParticipants).catch(console.error)}}},n=e=>(k("data-v-04c1b736"),e=e(),z(),e),B={class:"modal fade",id:"deleteModal"},M={class:"modal-dialog modal-dialog-centered"},N={class:"modal-content"},T={class:"modal-header"},V={class:"modal-title fs-5"},E=n(()=>t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1)),F={class:"modal-body"},L={class:"modal-footer justify-content-start"},U=n(()=>t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Отмена",-1)),j={class:"title my-3 d-flex align-items-center gap-3"},G=n(()=>t("h1",null,"Управление участниками театра",-1)),q={class:"table-wrapper"},H={class:"table table-hover"},J=n(()=>t("thead",null,[t("tr",null,[t("th",null,"№"),t("th",null,"ID"),t("th",null,"ФИО"),t("th",null,"Роль"),t("th",null,"Фото"),t("th",null,"Создано"),t("th",null,"Обновлено"),t("th")])],-1)),K=["title"],O=["title"],Q={width:"20",height:"20",fill:"gray",class:"bi-card-image",viewBox:"0 0 16 16"},R=n(()=>t("path",{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"},null,-1)),W=n(()=>t("path",{d:"M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54A.505.505 0 0 1 1 12.5v-9a.5.5 0 0 1 .5-.5h13z"},null,-1)),X=[R,W],Y={class:"dropdown"},Z=n(()=>t("span",{type:"button","data-bs-toggle":"dropdown"},[t("img",{src:"/images/three-dots-vertical.svg",alt:"three-dots-vertical",type:"button","data-toggle":"dropdown"})],-1)),$={class:"dropdown-menu dropdown-menu-end"},tt=["onClick"];function et(e,s,h,p,i,l){const u=x("router-link"),v=I("tippy");return c(),r(b,null,[t("div",B,[t("div",M,[t("div",N,[t("div",T,[t("h1",V,[d("Удаление участника "),t("span",null,"«"+o(i.deleteParticipantInfo.name)+"»",1)]),E]),t("div",F,[d(" Вы уверенны, что хотите удалить участника "),t("span",null,"«"+o(i.deleteParticipantInfo.name)+"»",1),d("? ")]),t("div",L,[U,t("button",{type:"button",class:"btn btn-danger",onClick:s[0]||(s[0]=a=>l.deleteParticipant(i.deleteParticipantInfo.id)),"data-bs-dismiss":"modal"},"Удалить")])])])]),t("div",j,[G,m(u,{to:"/admin/participants/create",class:"btn btn-primary"},{default:g(()=>[d("Создать")]),_:1})]),t("div",q,[t("table",H,[J,t("tbody",null,[(c(!0),r(b,null,A(i.participants,(a,f)=>(c(),r("tr",null,[t("th",null,o(f+1),1),t("td",null,o(a.id),1),t("td",{class:"text-truncate user-select-none",title:a.name},o(a.name),9,K),t("td",{class:"text-truncate",title:a.role},o(a.role),9,O),t("td",null,[D((c(),r("svg",Q,X)),[[v,{content:l.getImgTag(a.photo,a.name)}]])]),t("td",null,o(l.changeDate(a.created_at)),1),t("td",null,o(l.changeDate(a.updated_at)),1),t("td",null,[t("div",Y,[Z,t("ul",$,[t("li",null,[m(u,{class:"dropdown-item",to:"/admin/participants/update/"+a.id},{default:g(()=>[d("Редактировать")]),_:2},1032,["to"])]),t("li",null,[t("span",{onClick:at=>l.loadDeleteParticipant(a.id),class:"dropdown-item",type:"button","data-bs-toggle":"modal","data-bs-target":"#deleteModal"},"Удалить",8,tt)])])])])]))),256))])])])],64)}const lt=y(S,[["render",et],["__scopeId","data-v-04c1b736"]]);export{lt as default};
