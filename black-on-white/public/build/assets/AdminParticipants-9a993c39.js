import{_ as b,E as P,f as _,r as f,G as y,o as c,c as r,a as t,e as d,t as s,b as p,w as u,F as m,g as w,l as A,p as I,d as x}from"./app-e9fbd619.js";import{c as U}from"./ChangeDate-db5be761.js";import"./_commonjsHelpers-87174ba5.js";const D={name:"AdminParticipants",directives:{tippy:P},data(){return{participants:[],deleteParticipantInfo:[]}},mounted(){this.loadParticipants()},methods:{changeDate:U,loadParticipants(){_.get("/api/participant").then(e=>{this.participants=e.data.data})},getImgTag(e,n){return`<img width=150 style="border-radius: 10px" src="${e}" alt="${n}">`},loadDeleteParticipant(e){_.get("/api/participant/"+e).then(n=>{this.deleteParticipantInfo=n.data.data})},deleteParticipant(e){_.post("/api/participant/"+e,{_method:"delete"},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(this.loadParticipants).catch(console.error)}}},o=e=>(I("data-v-9346fd63"),e=e(),x(),e),V={class:"modal fade",id:"deleteModal"},k={class:"modal-dialog modal-dialog-centered"},E={class:"modal-content"},L={class:"modal-header"},R={class:"modal-title fs-5"},B=o(()=>t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1)),C={class:"modal-body"},S={class:"modal-footer justify-content-start"},z=o(()=>t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Отмена",-1)),M={class:"title my-3 d-flex align-items-center gap-3"},N=o(()=>t("h1",null,"Управление участниками театра",-1)),T={class:"table-wrapper"},F={class:"table table-hover"},j=o(()=>t("thead",null,[t("tr",null,[t("th",null,"№"),t("th",null,"ID"),t("th",null,"ФИО"),t("th",null,"Роль"),t("th",null,"Фото"),t("th",null,"Создано"),t("th",null,"Обновлено"),t("th")])],-1)),G=["title"],q=["title"],H={width:"20",height:"20",fill:"gray",class:"bi-card-image",viewBox:"0 0 16 16"},J=o(()=>t("path",{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"},null,-1)),K=o(()=>t("path",{d:"M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54A.505.505 0 0 1 1 12.5v-9a.5.5 0 0 1 .5-.5h13z"},null,-1)),O=[J,K],Q={class:"dropdown"},W=o(()=>t("span",{type:"button","data-bs-toggle":"dropdown"},[t("img",{src:"/images/three-dots-vertical.svg",alt:"three-dots-vertical",type:"button","data-toggle":"dropdown"})],-1)),X={class:"dropdown-menu dropdown-menu-end"},Y=["onClick"];function Z(e,n,$,tt,i,l){const h=f("router-link"),g=y("tippy");return c(),r(m,null,[t("div",V,[t("div",k,[t("div",E,[t("div",L,[t("h1",R,[d("Удаление участника "),t("span",null,"«"+s(i.deleteParticipantInfo.name)+"»",1)]),B]),t("div",C,[d(" Вы уверенны, что хотите удалить участника "),t("span",null,"«"+s(i.deleteParticipantInfo.name)+"»",1),d("? ")]),t("div",S,[z,t("button",{type:"button",class:"btn btn-danger",onClick:n[0]||(n[0]=a=>l.deleteParticipant(i.deleteParticipantInfo.id)),"data-bs-dismiss":"modal"},"Удалить")])])])]),t("div",M,[N,p(h,{to:"/admin/participants/create",class:"btn btn-primary"},{default:u(()=>[d("Создать")]),_:1})]),t("div",T,[t("table",F,[j,t("tbody",null,[(c(!0),r(m,null,w(i.participants,(a,v)=>(c(),r("tr",null,[t("th",null,s(v+1),1),t("td",null,s(a.id),1),t("td",{class:"text-truncate user-select-none",title:a.name},s(a.name),9,G),t("td",{class:"text-truncate",title:a.role},s(a.role),9,q),t("td",null,[A((c(),r("svg",H,O)),[[g,{content:l.getImgTag(a.photo,a.name)}]])]),t("td",null,s(l.changeDate(a.created_at)),1),t("td",null,s(l.changeDate(a.updated_at)),1),t("td",null,[t("div",Q,[W,t("ul",X,[t("li",null,[p(h,{class:"dropdown-item",to:"/admin/participants/update/"+a.id},{default:u(()=>[d("Редактировать")]),_:2},1032,["to"])]),t("li",null,[t("span",{onClick:et=>l.loadDeleteParticipant(a.id),class:"dropdown-item",type:"button","data-bs-toggle":"modal","data-bs-target":"#deleteModal"},"Удалить",8,Y)])])])])]))),256))])])])],64)}const nt=b(D,[["render",Z],["__scopeId","data-v-9346fd63"]]);export{nt as default};
