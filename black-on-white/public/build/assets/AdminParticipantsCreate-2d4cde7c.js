import{T as y}from"./Toast-d9fb1dce.js";import{_ as b,U as x,r as h,o as a,c as n,h as v,i as l,a as e,k as g,l as m,m as _,t as d,b as k,w,e as P,F as C,p as S,d as U}from"./app-bded94c7.js";const D={name:"AdminParticipantsCreate",components:{Toast:y},data(){return{errors:[],installedPhoto:null,name:null,role:null,photo:null,data:null,created:!1}},methods:{handlePhotoUpload(){this.photo=this.$refs.files.files[0]},getData(){let s=new FormData;s.append("name",this.name),s.append("role",this.role),s.append("photo",this.photo),this.data=s},create(){this.getData(),axios.post("/api/participant",this.data,{headers:{"Content-Type":"multipart/form-data",Authorization:x.getAuthorizationString()}}).then(()=>{this.errors=[],this.name=null,this.role=null,this.photo=null,this.created=!0}).catch(s=>{if(s.response.status===422){this.errors=[];let o=JSON.parse(s.request.responseText).errors;for(const p in o)this.errors[p]=o[p][0]}})}}},i=s=>(S("data-v-4237202e"),s=s(),U(),s),T=i(()=>e("div",{class:"title my-3"},[e("h1",null,"Создание участника")],-1)),V={class:"form-wrapper"},A={class:"mb-3"},N=i(()=>e("label",{for:"name",class:"form-label"},"ФИО участника",-1)),B={key:0,class:"text-danger"},I={class:"mb-3"},O=i(()=>e("label",{for:"role",class:"form-label"},"Роль участника",-1)),F={key:0,class:"text-danger"},z={class:"mb-3"},M={key:0,class:"w-100 d-flex align-items-center justify-content-center"},j=["src"],q=i(()=>e("label",{for:"photo",class:"form-label"},"Фото участника",-1)),E={key:1,class:"text-danger"},J={class:"d-flex gap-2"},G=i(()=>e("button",{type:"submit",class:"btn btn-primary"},"Сохранить",-1));function H(s,o,p,K,t,c){const u=h("toast"),f=h("router-link");return a(),n(C,null,[t.created?(a(),v(u,{key:0,title:"Участник успешно добавлен"})):l("",!0),T,e("div",V,[e("form",{onSubmit:o[3]||(o[3]=g((...r)=>c.create&&c.create(...r),["prevent"]))},[e("div",A,[N,m(e("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>t.name=r),type:"text",class:"form-control",id:"name"},null,512),[[_,t.name]]),t.errors.hasOwnProperty("name")?(a(),n("small",B,d(t.errors.name),1)):l("",!0)]),e("div",I,[O,m(e("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>t.role=r),type:"text",class:"form-control",id:"role"},null,512),[[_,t.role]]),t.errors.hasOwnProperty("role")?(a(),n("small",F,d(t.errors.role),1)):l("",!0)]),e("div",z,[t.installedPhoto?(a(),n("div",M,[e("img",{src:t.installedPhoto,class:"w-50",alt:"Фото участника"},null,8,j)])):l("",!0),q,e("input",{onChange:o[2]||(o[2]=(...r)=>c.handlePhotoUpload&&c.handlePhotoUpload(...r)),ref:"files",class:"form-control",type:"file",id:"photo"},null,544),t.errors.hasOwnProperty("photo")?(a(),n("small",E,d(t.errors.photo),1)):l("",!0)]),e("div",J,[G,k(f,{class:"btn btn-secondary",to:"/admin/participants"},{default:w(()=>[P("Отмена")]),_:1})])],32)])],64)}const R=b(D,[["render",H],["__scopeId","data-v-4237202e"]]);export{R as default};
