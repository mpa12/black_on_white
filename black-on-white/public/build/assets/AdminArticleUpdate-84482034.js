import{A as m}from"./AdminArticleForm-fe9c8460.js";import{T as l}from"./Toast-d9fb1dce.js";import{_,U as u,r as i,o,c as h,h as n,i as f,F as A,p as v,d as y,a as d}from"./app-bded94c7.js";import"./_commonjsHelpers-87174ba5.js";const E={name:"AdminArticleUpdate",components:{AdminArticleForm:m,Toast:l},data(){return{article_id:null,updated:!1,formKey:0}},mounted(){this.article_id=this.$route.params.id,window.addEventListener("getData",function(t){this.formData=t.detail.formData,this.update(this.formData)}.bind(this))},methods:{update(t){axios.post("/api/article/"+this.$route.params.id,t,{headers:{"Content-Type":"multipart/form-data",Authorization:u.getAuthorizationString()}}).then(()=>{this.updated=!0,this.formKey++}).catch(this.updateErrorHandler)},updateErrorHandler(t){if(t.response.status===422){let e=JSON.parse(t.request.responseText).errors;for(const a in e)e[a]=e[a][0];let r=new CustomEvent("setErrors",{detail:{errors:e}});window.dispatchEvent(r),console.error(e)}}}},k=t=>(v("data-v-a55ea6a7"),t=t(),y(),t),w=k(()=>d("div",{class:"article-form-title my-3"},[d("h1",null,"Редактирование новости")],-1));function x(t,e,r,a,s,g){const c=i("toast"),p=i("admin-article-form");return o(),h(A,null,[s.updated?(o(),n(c,{key:0,title:"Новость успешно изменена"})):f("",!0),w,(o(),n(p,{key:s.formKey}))],64)}const D=_(E,[["render",x],["__scopeId","data-v-a55ea6a7"]]);export{D as default};
