import{A as l}from"./AdminArticleForm-d208a8a0.js";import{T as p}from"./Toast-9c167add.js";import{_,r as n,o as r,c as f,h as c,i as u,F as h,p as A,d as v,a as i}from"./app-3d712025.js";import"./_commonjsHelpers-87174ba5.js";const y={name:"AdminArticleCreate",components:{AdminArticleForm:l,Toast:p},data(){return{formData:null,created:!1,formKey:0}},mounted(){window.addEventListener("getData",function(e){this.formData=e.detail.formData,this.create(this.formData)}.bind(this))},methods:{create(e){axios.post("/api/article",e,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(()=>{this.created=!0,this.formKey++}).catch(o=>{if(o.response.status===422){let t=JSON.parse(o.request.responseText).errors;for(const a in t)t[a]=t[a][0];let s=new CustomEvent("setErrors",{detail:{errors:t}});window.dispatchEvent(s)}})}}},k=e=>(A("data-v-e9f7ba7a"),e=e(),v(),e),C=k(()=>i("div",{class:"article-form-title my-3"},[i("h1",null,"Добавление новости")],-1));function E(e,o,t,s,a,w){const m=n("toast"),d=n("admin-article-form");return r(),f(h,null,[a.created?(r(),c(m,{key:0,title:"Новость успешно добавлена"})):u("",!0),C,(r(),c(d,{key:a.formKey}))],64)}const I=_(y,[["render",E],["__scopeId","data-v-e9f7ba7a"]]);export{I as default};
