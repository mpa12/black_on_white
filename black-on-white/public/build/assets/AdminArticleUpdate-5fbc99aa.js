import{A as m}from"./AdminArticleForm-27b41494.js";import{T as l}from"./Toast-049a08c5.js";import{_,r as i,o as r,c as u,h as n,i as f,F as h,p as A,d as v,a as c}from"./app-38c7d57f.js";import"./_commonjsHelpers-87174ba5.js";const y={name:"AdminArticleUpdate",components:{AdminArticleForm:m,Toast:l},data(){return{article_id:null,updated:!1,formKey:0}},mounted(){this.article_id=this.$route.params.id,window.addEventListener("getData",function(t){this.formData=t.detail.formData,this.update(this.formData)}.bind(this))},methods:{update(t){axios.post("/api/article/"+this.article_id,t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(()=>{this.updated=!0,this.formKey++}).catch(a=>{if(a.response.status===422){let e=JSON.parse(a.request.responseText).errors;for(const o in e)e[o]=e[o][0];let s=new CustomEvent("setErrors",{detail:{errors:e}});window.dispatchEvent(s),console.log(e)}})}}},k=t=>(A("data-v-3236278b"),t=t(),v(),t),E=k(()=>c("div",{class:"article-form-title my-3"},[c("h1",null,"Редактирование новости")],-1));function U(t,a,e,s,o,g){const d=i("toast"),p=i("admin-article-form");return r(),u(h,null,[o.updated?(r(),n(d,{key:0,title:"Новость успешно изменена"})):f("",!0),E,(r(),n(p,{key:o.formKey}))],64)}const S=_(y,[["render",U],["__scopeId","data-v-3236278b"]]);export{S as default};
