import{A as m}from"./AdminArticleForm-a37aeea5.js";import{T as l}from"./Toast-946d871f.js";import{_,r as i,o as r,c as u,h as n,i as f,F as h,p as A,d as v,a as c}from"./app-e9fbd619.js";import"./_commonjsHelpers-87174ba5.js";const y={name:"AdminArticleUpdate",components:{AdminArticleForm:m,Toast:l},data(){return{article_id:null,updated:!1,formKey:0}},mounted(){this.article_id=this.$route.params.id,window.addEventListener("getData",function(e){this.formData=e.detail.formData,this.update(this.formData)}.bind(this))},methods:{update(e){axios.post("/api/article/"+this.$route.params.id,e,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(()=>{this.updated=!0,this.formKey++}).catch(a=>{if(a.response.status===422){let t=JSON.parse(a.request.responseText).errors;for(const o in t)t[o]=t[o][0];let s=new CustomEvent("setErrors",{detail:{errors:t}});window.dispatchEvent(s),console.log(t)}})}}},k=e=>(A("data-v-cd732efc"),e=e(),v(),e),E=k(()=>c("div",{class:"article-form-title my-3"},[c("h1",null,"Редактирование новости")],-1));function U(e,a,t,s,o,g){const d=i("toast"),p=i("admin-article-form");return r(),u(h,null,[o.updated?(r(),n(d,{key:0,title:"Новость успешно изменена"})):f("",!0),E,(r(),n(p,{key:o.formKey}))],64)}const S=_(y,[["render",U],["__scopeId","data-v-cd732efc"]]);export{S as default};
