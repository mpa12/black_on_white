import{T as y}from"./Toast-dab88776.js";import{_ as b,r as h,o as a,c as l,h as x,i as n,a as e,k as P,l as m,m as _,t as d,b as v,w as g,e as k,F as w,p as U,d as C}from"./app-51fe443e.js";const V={name:"AdminParticipantsCreate",components:{Toast:y},data(){return{errors:[],installedPhoto:null,name:null,role:null,photo:null,data:null,created:!1}},methods:{handlePhotoUpload(){this.photo=this.$refs.files.files[0]},getData(){let o=new FormData;o.append("name",this.name),o.append("role",this.role),o.append("photo",this.photo),this.data=o},create(){this.getData(),axios.post("http://localhost:8080/api/participant",this.data,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(()=>{this.errors=[],this.name=null,this.role=null,this.photo=null,this.created=!0}).catch(o=>{if(o.response.status===422){this.errors=[];let s=JSON.parse(o.request.responseText).errors;for(const p in s)this.errors[p]=s[p][0]}})}}},i=o=>(U("data-v-f3613066"),o=o(),C(),o),S=i(()=>e("div",{class:"title my-3"},[e("h1",null,"Создание участника")],-1)),A={class:"form-wrapper"},D={class:"mb-3"},T=i(()=>e("label",{for:"name",class:"form-label"},"ФИО участника",-1)),B={key:0,class:"text-danger"},I={class:"mb-3"},N=i(()=>e("label",{for:"role",class:"form-label"},"Роль участника",-1)),O={key:0,class:"text-danger"},E={class:"mb-3"},F={key:0,class:"w-100 d-flex align-items-center justify-content-center"},L=["src"],M=i(()=>e("label",{for:"photo",class:"form-label"},"Фото участника",-1)),R={key:1,class:"text-danger"},j={class:"d-flex gap-2"},q=i(()=>e("button",{type:"submit",class:"btn btn-primary"},"Сохранить",-1));function z(o,s,p,J,t,c){const u=h("toast"),f=h("router-link");return a(),l(w,null,[t.created?(a(),x(u,{key:0,title:"Участник успешно добавлен"})):n("",!0),S,e("div",A,[e("form",{onSubmit:s[3]||(s[3]=P((...r)=>c.create&&c.create(...r),["prevent"]))},[e("div",D,[T,m(e("input",{"onUpdate:modelValue":s[0]||(s[0]=r=>t.name=r),type:"text",class:"form-control",id:"name"},null,512),[[_,t.name]]),t.errors.hasOwnProperty("name")?(a(),l("small",B,d(t.errors.name),1)):n("",!0)]),e("div",I,[N,m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=r=>t.role=r),type:"text",class:"form-control",id:"role"},null,512),[[_,t.role]]),t.errors.hasOwnProperty("role")?(a(),l("small",O,d(t.errors.role),1)):n("",!0)]),e("div",E,[t.installedPhoto?(a(),l("div",F,[e("img",{src:t.installedPhoto,class:"w-50",alt:"Фото участника"},null,8,L)])):n("",!0),M,e("input",{onChange:s[2]||(s[2]=(...r)=>c.handlePhotoUpload&&c.handlePhotoUpload(...r)),ref:"files",class:"form-control",type:"file",id:"photo"},null,544),t.errors.hasOwnProperty("photo")?(a(),l("small",R,d(t.errors.photo),1)):n("",!0)]),e("div",j,[q,v(f,{class:"btn btn-secondary",to:"/admin/participants"},{default:g(()=>[k("Отмена")]),_:1})])],32)])],64)}const K=b(V,[["render",z],["__scopeId","data-v-f3613066"]]);export{K as default};
