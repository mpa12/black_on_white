import{A as w}from"./ArticleSearch-6ed6026c.js";import{_ as h,V as x,r as c,o as l,c as r,a as t,t as a,b as m,L as v,F as A,g as b,h as _,i as y}from"./app-bded94c7.js";import{c as k}from"./ChangeDate-db5be761.js";import{A as F}from"./ArticleService-0e254c19.js";import"./_commonjsHelpers-87174ba5.js";const L={name:"ArticleCard",components:{VButton:x},props:["article"],methods:{changeDate:k}},S={class:"newses__card col-12 d-flex flex-column flex-lg-row"},B={class:"col-lg-6 col-12 newses__card-desc"},C={class:"newses__card-tag"},V=["src","alt"],E={class:"col-lg-6 col-12 newses__card-photo d-none d-lg-block"},P=["src","alt"];function D(s,u,e,g,i,n){const o=c("v-button");return l(),r("div",S,[t("div",B,[t("time",null,a(n.changeDate(e.article.created_at)),1),t("h1",null,a(e.article.title),1),t("span",C,a(e.article.article_type.title),1),t("img",{src:"/storage/"+e.article.photo,alt:e.article.title,class:"d-lg-none d-block"},null,8,V),t("p",null,a(e.article.description),1),m(o,{class:"mt-auto",title:"Смотреть новость",href:"/article/"+e.article.id},null,8,["href"])]),t("div",E,[t("img",{src:"/storage/"+e.article.photo,alt:e.article.title},null,8,P)])])}const N=h(L,[["render",D],["__scopeId","data-v-056e421b"]]),H={name:"Articles",components:{Loader:v,ArticleCard:N,ArticleSearch:w},data(){return{articles:[],page:1,loading:!1,totalPages:null,selectedFilters:[],text:""}},mounted(){this.loadArticles(),window.addEventListener("scroll",this.handleScroll),window.addEventListener("search",function(s){this.selectedFilters=[...s.detail.selectedFilters],this.text=s.detail.text,this.articles=[],this.page=1,this.loadArticles()}.bind(this))},destroyed(){window.removeEventListener("scroll",this.handleScroll)},methods:{async loadArticles(){this.loading=!0;const s=await F.index(this.page,this.text,this.selectedFilters,this.articles);this.articles=s.articles,this.totalPages=s.totalPages,this.loading=!1},handleScroll(){this.loading||window.pageYOffset+window.innerHeight>=document.body.offsetHeight&&(this.page>=this.totalPages||(this.page+=1,this.loadArticles()))}}},I={class:"w-100 gap-3 d-flex flex-column"};function O(s,u,e,g,i,n){const o=c("article-search"),f=c("article-card"),p=c("loader");return l(),r("div",I,[m(o),(l(!0),r(A,null,b(i.articles,d=>(l(),_(f,{article:d,key:d.id},null,8,["article"]))),128)),i.loading?(l(),_(p,{key:0})):y("",!0)])}const J=h(H,[["render",O]]);export{J as default};
