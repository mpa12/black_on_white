import{_ as p,L as u,f,r as y,o as t,c as s,a as r,F as g,g as v,i as m,h as w}from"./app-51fe443e.js";const k={name:"PhotoGallery",components:{Loader:u},data(){return{images:[],page:1,totalPages:null,loading:!1}},mounted(){this.loadImages(),window.addEventListener("scroll",this.handleScroll)},destroyed(){window.removeEventListener("scroll",this.handleScroll)},methods:{openImage(e){this.images[e].show=!0,document.body.style.overflow="hidden"},closeImage(e){this.images[e].show=!1,document.body.style.overflow="auto"},loadImages(){this.loading=!0;let e={page:this.page};f.get("http://localhost:8080/api/photo-gallery",{params:e}).then(o=>{let i=o.data.data.map(c=>({src:c.photo,show:!1}));this.images=[...this.images,...i],this.totalPages=o.data.meta.last_page,this.loading=!1})},handleScroll(){this.loading||window.pageYOffset+window.innerHeight+200>=document.body.offsetHeight&&this.page<this.totalPages&&(this.page+=1,this.loadImages())}}},P={class:"gallery"},I=["src","onClick"],C=["onClick"],b=["src","onClick"];function L(e,o,i,c,d,l){const _=y("loader");return t(),s(g,null,[r("div",P,[(t(!0),s(g,null,v(d.images,(n,a)=>(t(),s("div",{class:"gallery-item",key:a},[r("img",{class:"gallery-image",src:n.src,onClick:h=>l.openImage(a),alt:"Фото"},null,8,I),n.show?(t(),s("div",{key:0,onClick:h=>l.closeImage(a),class:"overlay"},[r("img",{src:n.src,onClick:h=>l.closeImage(a),alt:"Фото"},null,8,b)],8,C)):m("",!0)]))),128))]),d.loading?(t(),w(_,{key:0})):m("",!0)],64)}const B=p(k,[["render",L],["__scopeId","data-v-9390b8b6"]]);export{B as default};
