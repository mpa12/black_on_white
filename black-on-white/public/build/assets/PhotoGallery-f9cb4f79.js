import{_ as u,L as p,f,r as y,o as a,c as s,a as r,F as h,g as v,i as m,h as w}from"./app-4f927822.js";const k={name:"PhotoGallery",components:{Loader:p},data(){return{images:[],page:1,totalPages:null,loading:!1}},mounted(){this.loadImages(),window.addEventListener("scroll",this.handleScroll)},destroyed(){window.removeEventListener("scroll",this.handleScroll)},methods:{openImage(e){this.images[e].show=!0,document.body.style.overflow="hidden"},closeImage(e){this.images[e].show=!1,document.body.style.overflow="auto"},loadImages(){this.loading=!0;let e={page:this.page};f.get("/api/photo-gallery",{params:e}).then(o=>{let i=o.data.data.map(c=>({src:c.photo,show:!1}));this.images=[...this.images,...i],this.totalPages=o.data.meta.last_page,this.loading=!1})},handleScroll(){this.loading||window.pageYOffset+window.innerHeight+200>=document.body.offsetHeight&&this.page<this.totalPages&&(this.page+=1,this.loadImages())}}},P={class:"gallery"},I=["src","onClick"],C=["onClick"],L=["src","onClick"];function b(e,o,i,c,d,l){const _=y("loader");return a(),s(h,null,[r("div",P,[(a(!0),s(h,null,v(d.images,(n,t)=>(a(),s("div",{class:"gallery-item",key:t},[r("img",{class:"gallery-image",src:"/storage/"+n.src,onClick:g=>l.openImage(t),alt:"Фото"},null,8,I),n.show?(a(),s("div",{key:0,onClick:g=>l.closeImage(t),class:"overlay"},[r("img",{src:"/storage/"+n.src,onClick:g=>l.closeImage(t),alt:"Фото"},null,8,L)],8,C)):m("",!0)]))),128))]),d.loading?(a(),w(_,{key:0})):m("",!0)],64)}const B=u(k,[["render",b],["__scopeId","data-v-07b23a4c"]]);export{B as default};
