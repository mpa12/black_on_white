import{_ as h,r as f,o as n,c as d,a as e,l as c,m as p,i as w,b as _,w as m,e as u,k as b,p as v,d as g}from"./app-3d712025.js";const x={name:"Login",data(){return{email:"",password:"",error:!1}},methods:{login(){axios.post("/api/auth/login",{email:this.email,password:this.password}).then(o=>{localStorage.setItem("token",o.data.user.api_token);let s=new CustomEvent("localStorageUpdated",{detail:null});window.dispatchEvent(s),this.$router.push("/")}).catch(()=>{this.error=!0})}}},l=o=>(v("data-v-6efc82a2"),o=o(),g(),o),k={class:"login-section"},V=l(()=>e("h1",{class:"mb-4"},"Авторизация",-1)),E={class:"mb-3"},U=l(()=>e("label",{for:"email",class:"form-label"},"E-mail",-1)),y={class:"mb-3"},S=l(()=>e("label",{for:"password",class:"form-label"},"Пароль",-1)),I={key:0,class:"text-danger"},L=l(()=>e("button",{type:"submit",class:"btn btn-circle mb-4"},"Войти",-1)),C={class:"mb-3"},N={class:"mb-3"};function P(o,s,B,A,t,r){const i=f("router-link");return n(),d("section",k,[e("form",{class:"login-wrapper",onSubmit:s[2]||(s[2]=b((...a)=>r.login&&r.login(...a),["prevent"]))},[V,e("div",E,[U,c(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.email=a),type:"text",class:"form-control",id:"email",placeholder:"E-mail"},null,512),[[p,t.email]])]),e("div",y,[S,c(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>t.password=a),type:"password",class:"form-control",id:"password",placeholder:"Пароль"},null,512),[[p,t.password]])]),t.error?(n(),d("p",I,"Неверный e-mail или пароль")):w("",!0),L,e("div",C,[_(i,{to:"/reset-password"},{default:m(()=>[u("Забыли пароль?")]),_:1})]),e("div",N,[_(i,{to:"/register"},{default:m(()=>[u("Зарегистрироваться")]),_:1})])],32)])}const R=h(x,[["render",P],["__scopeId","data-v-6efc82a2"]]);export{R as default};
