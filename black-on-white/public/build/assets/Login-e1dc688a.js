import{_ as f,U as h,r as b,o as n,c as d,a as e,l as c,m as p,i as w,b as _,w as m,e as u,k as v,p as g,d as x}from"./app-bded94c7.js";const k={name:"Login",data(){return{email:"",password:"",error:!1}},methods:{login(){axios.post("/api/auth/login",{email:this.email,password:this.password}).then(o=>{h.login(o.data.user.api_token);let s=new CustomEvent("localStorageUpdated",{detail:null});window.dispatchEvent(s),this.$router.push("/")}).catch(()=>{this.error=!0})}}},l=o=>(g("data-v-c3bb4eff"),o=o(),x(),o),y={class:"login-section"},V=l(()=>e("h1",{class:"mb-4"},"Авторизация",-1)),E={class:"mb-3"},S=l(()=>e("label",{for:"email",class:"form-label"},"E-mail",-1)),U={class:"mb-3"},C=l(()=>e("label",{for:"password",class:"form-label"},"Пароль",-1)),I={key:0,class:"text-danger"},N=l(()=>e("button",{type:"submit",class:"btn btn-circle mb-4"},"Войти",-1)),B={class:"mb-3"},L={class:"mb-3"};function M(o,s,T,D,t,r){const i=b("router-link");return n(),d("section",y,[e("form",{class:"login-wrapper",onSubmit:s[2]||(s[2]=v((...a)=>r.login&&r.login(...a),["prevent"]))},[V,e("div",E,[S,c(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.email=a),type:"text",class:"form-control",id:"email",placeholder:"E-mail"},null,512),[[p,t.email]])]),e("div",U,[C,c(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>t.password=a),type:"password",class:"form-control",id:"password",placeholder:"Пароль"},null,512),[[p,t.password]])]),t.error?(n(),d("p",I,"Неверный e-mail или пароль")):w("",!0),N,e("div",B,[_(i,{to:"/reset-password"},{default:m(()=>[u("Забыли пароль?")]),_:1})]),e("div",L,[_(i,{to:"/register"},{default:m(()=>[u("Зарегистрироваться")]),_:1})])],32)])}const q=f(k,[["render",M],["__scopeId","data-v-c3bb4eff"]]);export{q as default};
